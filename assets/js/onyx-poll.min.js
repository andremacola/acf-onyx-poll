!function(){"use strict";(new class{requestModal(){return new Promise((t,l)=>{const o=new XMLHttpRequest;o.open("GET",`${onyxpoll.apiurl}onyx/polls/list/?modal=1`),o.send(null),o.onload=function(){this.status>=200?t(JSON.parse(this.response)[0]):l("Poll cannot be loaded.")}})}prepareModal(){const t=document.querySelector("#onyx-poll-modal");null!=t&&this.requestModal().then(l=>this.renderModal(l,t)).catch(t=>console.warn(t))}renderModal(t,l){l.innerHTML=`\n\t\t\t<div id='onyx-poll-wrapper-${t.id}'>\n\t\t\t\t<p class='onyx-poll-question'>${t.title}</p>\n\t\t\t\t<ul id="onyx-poll-choices-${t.id}" class='onyx-poll-choices'></ul>\n\t\t\t\t<p class='onyx-poll-message'></p>\n\t\t\t\t<p class='onyx-poll-results'></p>\n\t\t\t</div>\n\t\t\t<span class="poll-loader"></span>\n\t\t\t<span class="poll-close"></span>\n\t\t`;const o=document.querySelector(`#onyx-poll-wrapper-${t.id}`);t.results.total&&(o.innerHTML+=`<p class="onyx-poll-view">${onyxpoll.labels.view}</p>`);const e=document.querySelector(`#onyx-poll-choices-${t.id}`);for(const l of t.answers){const o=document.createElement("li");o.setAttribute("data-choice",l.option),o.setAttribute("data-poll",t.id),o.textContent=l.answer,e.appendChild(o)}}}).prepareModal()}();